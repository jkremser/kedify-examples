# apiVersion: v1
# kind: Secret
# metadata:
#   name: rabbitmq-credentials
# type: Opaque
# data:
#   address: "YW1xcDovL2RlZmF1bHRfdXNlcl9obUdaRmhkZXdxNjVQNGRJZHg3OnFjOThuNGlHRDdNWVhNQlZGY0lPMm10QjV2b0R1Vl9uQHJhYmJpdG1xLWNsdXN0ZXI6NTY3Mg=="
# ---
# apiVersion: apps/v1
# kind: Deployment
# metadata:
#   name: amqp-consumer-deployment
# spec:
#   replicas: 1
#   selector:
#     matchLabels:
#       app: amqp-consumer
#   template:
#     metadata:
#       labels:
#         app: amqp-consumer
#     spec:
#       containers:
#         - name: amqp-consumer
#           image: sharadregoti/amqp-tools:v0.1.0
#           command: ["/bin/sh", "-c"]
#           args:
#             - |
#               echo "Waiting for message...\n"
#               amqp-consume --url="$RABBITMQ_URL" -q "testqueue" -c 1 cat
#               echo "message received, processing..."
#               i=1
#               while [ $i -le 360 ]; do
#                 echo "Sleeping second $i"
#                 sleep 1
#                 i=$((i+1))
#               done
#               curl -X POST http://counter-service:8080/create/count -s
#           env:
#             - name: RABBITMQ_URL
#               valueFrom:
#                 secretKeyRef:
#                   name: rabbitmq-credentials
#                   key: address
